{"ast":null,"code":"var _jsxFileName = \"/Users/chavarias/Desktop/informatica/MernReloj/frontend/src/components/asistencias/table.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport './estilos.css';\nimport Socket from '../socket';\nimport axios from 'axios';\nimport Moment from 'moment';\nimport { extendMoment } from 'moment-range';\nexport default function Table() {\n  const [DiaInicio, setInicio] = useState(moment(moment().startOf('month').format('YYYY-MM-DD')));\n  const [diaFinal, setFinal] = useState(moment(moment().startOf('month').add(6, 'days').format('YYYY-MM-DD')));\n  const [checadas, setChecadas] = useState({});\n  const checadasFinal = [];\n  const dias = [];\n  useEffect(() => {\n    const fechData = async () => {\n      const res = await axios.get('http://localhost:4000/api/checadas/');\n      setChecadas(res.data);\n    };\n\n    fechData();\n    Socket.on('checada', data => {});\n  }, []);\n\n  const RenderFecha = () => {\n    for (let index = 0; index <= final.diff(inicio, 'days'); index++) {\n      dias.push(moment().startOf('month').add(index, 'days').format('YYYY-MM-DD'));\n    }\n  };\n\n  const renderChecada = () => {\n    RenderFecha();\n\n    if (checadas.length > 0) {\n      checadas.map(checada => {\n        const filtro = checadasFinal.filter(filtro => filtro.empleado === checada.empleado);\n\n        if (filtro.length === 0) {\n          const dias = checadas.filter(empleado => empleado.empleado === checada.empleado);\n          checadasFinal.push({\n            empleado: checada.empleado,\n            dias: dias\n          });\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-bordered tableAsisten\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, renderChecada(), /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"thead\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }, \"Nombre\"), dias.map(dia => /*#__PURE__*/React.createElement(\"th\", {\n    key: dia,\n    scope: \"col\",\n    className: \"dia text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }\n  }, moment(dia).format('dddd'), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 29\n    }\n  }), moment(dia).format('DD/MM/YYYY'))))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, checadasFinal.map(empleado => /*#__PURE__*/React.createElement(\"tr\", {\n    key: empleado.empleado,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, empleado.empleado), dias.map(dia => {\n    const filtro = empleado.dias.filter(checada => checada.dia === dia);\n\n    if (filtro.length > 0) {\n      if (filtro[0].tipo === \"Correcta\") {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          key: filtro[0].entrada,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"badge bg-checada btn\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"far fa-check-circle btn-block h4\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 45\n          }\n        }), moment(new Date(filtro[0].entrada)).format('HH:mm'), \" - \", filtro[0].salida ? moment(new Date(filtro[0].salida)).format('HH:mm') : '****'));\n      } else if (filtro[0].tipo === \"Falta\") {\n        return /*#__PURE__*/React.createElement(\"td\", {\n          key: filtro[0].entrada,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"badge bg-falta btn\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"far fa-check-circle btn-block h4\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 45\n          }\n        }), moment(new Date(filtro[0].entrada)).format('HH:mm'), \" - \", filtro[0].salida ? moment(new Date(filtro[0].salida)).format('HH:mm') : '****'));\n      }\n    } else {\n      return /*#__PURE__*/React.createElement(\"td\", {\n        key: dia,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"badge bg-Outchecada btn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 37\n        }\n      }, \"---\"));\n    }\n  })))));\n}","map":{"version":3,"sources":["/Users/chavarias/Desktop/informatica/MernReloj/frontend/src/components/asistencias/table.jsx"],"names":["React","useState","useEffect","Socket","axios","Moment","extendMoment","Table","DiaInicio","setInicio","moment","startOf","format","diaFinal","setFinal","add","checadas","setChecadas","checadasFinal","dias","fechData","res","get","data","on","RenderFecha","index","final","diff","inicio","push","renderChecada","length","map","checada","filtro","filter","empleado","dia","tipo","entrada","Date","salida"],"mappings":";AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;AACA,OAAO,eAAP;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAAQC,YAAR,QAA2B,cAA3B;AAEA,eAAe,SAASC,KAAT,GAAiB;AAC5B,QAAM,CAACC,SAAD,EAAWC,SAAX,IAAwBR,QAAQ,CAACS,MAAM,CAACA,MAAM,GAAGC,OAAT,CAAiB,OAAjB,EAA0BC,MAA1B,CAAiC,YAAjC,CAAD,CAAP,CAAtC;AACA,QAAM,CAACC,QAAD,EAAUC,QAAV,IAAsBb,QAAQ,CAACS,MAAM,CAACA,MAAM,GAAGC,OAAT,CAAiB,OAAjB,EAA0BI,GAA1B,CAA8B,CAA9B,EAAgC,MAAhC,EAAwCH,MAAxC,CAA+C,YAA/C,CAAD,CAAP,CAApC;AACA,QAAM,CAACI,QAAD,EAAUC,WAAV,IAAyBhB,QAAQ,CAAC,EAAD,CAAvC;AACA,QAAMiB,aAAa,GAAC,EAApB;AACA,QAAMC,IAAI,GAAC,EAAX;AACAjB,EAAAA,SAAS,CAAC,MAAI;AACV,UAAMkB,QAAQ,GAAG,YAAS;AACtB,YAAMC,GAAG,GAAG,MAAMjB,KAAK,CAACkB,GAAN,CAAU,qCAAV,CAAlB;AACAL,MAAAA,WAAW,CAACI,GAAG,CAACE,IAAL,CAAX;AACH,KAHD;;AAIAH,IAAAA,QAAQ;AACRjB,IAAAA,MAAM,CAACqB,EAAP,CAAU,SAAV,EAAqBD,IAAD,IAAQ,CAE3B,CAFD;AAIH,GAVQ,EAUP,EAVO,CAAT;;AAWA,QAAME,WAAW,GAAE,MAAI;AAEnB,SAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,IAAIC,KAAK,CAACC,IAAN,CAAWC,MAAX,EAAkB,MAAlB,CAA7B,EAAwDH,KAAK,EAA7D,EAAiE;AAC7DP,MAAAA,IAAI,CAACW,IAAL,CAAUpB,MAAM,GAAGC,OAAT,CAAiB,OAAjB,EAA0BI,GAA1B,CAA8BW,KAA9B,EAAoC,MAApC,EAA4Cd,MAA5C,CAAmD,YAAnD,CAAV;AACH;AACJ,GALD;;AAMA,QAAMmB,aAAa,GAAE,MAAI;AACtBN,IAAAA,WAAW;;AACV,QAAGT,QAAQ,CAACgB,MAAT,GAAgB,CAAnB,EAAqB;AACjBhB,MAAAA,QAAQ,CAACiB,GAAT,CAAaC,OAAO,IAChB;AACI,cAAMC,MAAM,GAAGjB,aAAa,CAACkB,MAAd,CAAqBD,MAAM,IAAIA,MAAM,CAACE,QAAP,KAAoBH,OAAO,CAACG,QAA3D,CAAf;;AACA,YAAIF,MAAM,CAACH,MAAP,KAAgB,CAApB,EAAuB;AACnB,gBAAMb,IAAI,GAAGH,QAAQ,CAACoB,MAAT,CAAgBC,QAAQ,IAAEA,QAAQ,CAACA,QAAT,KAAoBH,OAAO,CAACG,QAAtD,CAAb;AACAnB,UAAAA,aAAa,CAACY,IAAd,CAAmB;AACfO,YAAAA,QAAQ,EAACH,OAAO,CAACG,QADF;AAEflB,YAAAA,IAAI,EAACA;AAFU,WAAnB;AAIH;AACJ,OAVL;AAYH;AACJ,GAhBD;;AAiBA,sBACI;AAAO,IAAA,SAAS,EAAC,mCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKY,aAAa,EADlB,eAEI;AAAO,IAAA,SAAS,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAI,IAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAEKZ,IAAI,CAACc,GAAL,CAASK,GAAG,iBACT;AAAI,IAAA,GAAG,EAAEA,GAAT;AAAc,IAAA,KAAK,EAAC,KAApB;AAA0B,IAAA,SAAS,EAAC,iBAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK5B,MAAM,CAAC4B,GAAD,CAAN,CAAY1B,MAAZ,CAAmB,MAAnB,CADL,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGKF,MAAM,CAAC4B,GAAD,CAAN,CAAY1B,MAAZ,CAAmB,YAAnB,CAHL,CADH,CAFL,CADJ,CAFJ,eAcI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACCM,aAAa,CAACe,GAAd,CAAkBI,QAAQ,iBAC3B;AAAI,IAAA,GAAG,EAAEA,QAAQ,CAACA,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKA,QAAQ,CAACA,QAAd,CADJ,EAEKlB,IAAI,CAACc,GAAL,CAASK,GAAG,IACT;AACI,UAAMH,MAAM,GAAGE,QAAQ,CAAClB,IAAT,CAAciB,MAAd,CAAqBF,OAAO,IAAGA,OAAO,CAACI,GAAR,KAAgBA,GAA/C,CAAf;;AACA,QAAIH,MAAM,CAACH,MAAP,GAAc,CAAlB,EAAqB;AACjB,UAAIG,MAAM,CAAC,CAAD,CAAN,CAAUI,IAAV,KAAkB,UAAtB,EAAkC;AAC9B,4BACI;AAAI,UAAA,GAAG,EAAEJ,MAAM,CAAC,CAAD,CAAN,CAAUK,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACI;AAAM,UAAA,SAAS,EAAC,sBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACI;AAAG,UAAA,SAAS,EAAC,kCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,EAEK9B,MAAM,CAAC,IAAI+B,IAAJ,CAASN,MAAM,CAAC,CAAD,CAAN,CAAUK,OAAnB,CAAD,CAAN,CAAoC5B,MAApC,CAA2C,OAA3C,CAFL,SAE6DuB,MAAM,CAAC,CAAD,CAAN,CAAUO,MAAV,GAAmBhC,MAAM,CAAC,IAAI+B,IAAJ,CAASN,MAAM,CAAC,CAAD,CAAN,CAAUO,MAAnB,CAAD,CAAN,CAAmC9B,MAAnC,CAA0C,OAA1C,CAAnB,GAAsE,MAFnI,CADJ,CADJ;AAQH,OATD,MAUK,IAAGuB,MAAM,CAAC,CAAD,CAAN,CAAUI,IAAV,KAAiB,OAApB,EAA4B;AAC7B,4BACI;AAAI,UAAA,GAAG,EAAEJ,MAAM,CAAC,CAAD,CAAN,CAAUK,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACI;AAAM,UAAA,SAAS,EAAC,oBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACI;AAAG,UAAA,SAAS,EAAC,kCAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,EAEK9B,MAAM,CAAC,IAAI+B,IAAJ,CAASN,MAAM,CAAC,CAAD,CAAN,CAAUK,OAAnB,CAAD,CAAN,CAAoC5B,MAApC,CAA2C,OAA3C,CAFL,SAE6DuB,MAAM,CAAC,CAAD,CAAN,CAAUO,MAAV,GAAmBhC,MAAM,CAAC,IAAI+B,IAAJ,CAASN,MAAM,CAAC,CAAD,CAAN,CAAUO,MAAnB,CAAD,CAAN,CAAmC9B,MAAnC,CAA0C,OAA1C,CAAnB,GAAsE,MAFnI,CADJ,CADJ;AAQH;AACJ,KArBD,MAqBK;AACD,0BACI;AAAI,QAAA,GAAG,EAAE0B,GAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAM,QAAA,SAAS,EAAC,yBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADJ,CADJ;AAOH;AACJ,GAjCJ,CAFL,CADC,CADD,CAdJ,CADJ;AA4DH","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport './estilos.css'\nimport Socket from '../socket'\nimport axios from 'axios'\nimport Moment from 'moment'\nimport {extendMoment} from 'moment-range'\n\nexport default function Table() {\n    const [DiaInicio,setInicio] = useState(moment(moment().startOf('month').format('YYYY-MM-DD')))\n    const [diaFinal,setFinal] = useState(moment(moment().startOf('month').add(6,'days').format('YYYY-MM-DD')))\n    const [checadas,setChecadas] = useState({})\n    const checadasFinal=[]\n    const dias=[]\n    useEffect(()=>{\n        const fechData = async()=>{\n            const res = await axios.get('http://localhost:4000/api/checadas/')\n            setChecadas(res.data)\n        }\n        fechData()\n        Socket.on('checada',(data)=>{\n            \n        })\n       \n    },[])\n    const RenderFecha =()=>{\n\n        for (let index = 0; index <= final.diff(inicio,'days'); index++) {\n            dias.push(moment().startOf('month').add(index,'days').format('YYYY-MM-DD'))\n        }\n    }\n    const renderChecada =()=>{\n       RenderFecha()\n        if(checadas.length>0){\n            checadas.map(checada=>\n                {\n                    const filtro = checadasFinal.filter(filtro => filtro.empleado === checada.empleado)\n                    if (filtro.length===0) {\n                        const dias = checadas.filter(empleado=>empleado.empleado===checada.empleado)\n                        checadasFinal.push({\n                            empleado:checada.empleado,\n                            dias:dias\n                        })\n                    }\n                }\n            )\n        }\n    }\n    return (\n        <table className=\"table table-bordered tableAsisten\">\n            {renderChecada()}\n            <thead className=\"thead\">\n                <tr>\n                    <th scope=\"col\">Nombre</th>\n                    {dias.map(dia=>\n                        <th key={dia} scope=\"col\" className=\"dia text-center\">\n                            {moment(dia).format('dddd')}\n                            <br/>\n                            {moment(dia).format('DD/MM/YYYY')}\n                            </th>\n                    )}\n                </tr>\n            </thead>\n            <tbody>\n            {checadasFinal.map(empleado=>\n            <tr key={empleado.empleado}>\n                <td>{empleado.empleado}</td>\n                {dias.map(dia=>\n                    {\n                        const filtro = empleado.dias.filter(checada=> checada.dia === dia)\n                        if (filtro.length>0) {\n                            if (filtro[0].tipo ===\"Correcta\") {\n                                return(\n                                    <td key={filtro[0].entrada}>\n                                        <span className=\"badge bg-checada btn\">\n                                            <i className=\"far fa-check-circle btn-block h4\"></i> \n                                            {moment(new Date(filtro[0].entrada)).format('HH:mm')} - {filtro[0].salida ? moment(new Date(filtro[0].salida)).format('HH:mm'):'****'}\n                                        </span>\n                                    </td>\n                                )\n                            }\n                            else if(filtro[0].tipo===\"Falta\"){\n                                return(\n                                    <td key={filtro[0].entrada}>\n                                        <span className=\"badge bg-falta btn\">\n                                            <i className=\"far fa-check-circle btn-block h4\"></i> \n                                            {moment(new Date(filtro[0].entrada)).format('HH:mm')} - {filtro[0].salida ? moment(new Date(filtro[0].salida)).format('HH:mm'):'****'}\n                                        </span>\n                                    </td>\n                                )\n                            }\n                        }else{\n                            return(\n                                <td key={dia}>\n                                    <span className=\"badge bg-Outchecada btn\">\n                                        ---\n                                    </span>\n                                </td>\n                            )\n                        }\n                    }\n                )}\n            </tr>\n            )}\n                \n            </tbody>\n        </table>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}